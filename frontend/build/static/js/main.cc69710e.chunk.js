(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{68:function(e,a,t){e.exports=t(97)},73:function(e,a,t){},97:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(26),s=t.n(r),c=(t(73),t(10)),m=t(11),o=t(13),i=t(12),u=t(30),h=t(8),d=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(){return Object(c.a)(this,t),a.apply(this,arguments)}return Object(m.a)(t,[{key:"logOut",value:function(e){e.preventDefault(),localStorage.removeItem("usertoken"),this.props.history.push("/")}},{key:"render",value:function(){var e=l.a.createElement("ul",{className:"navbar-nav"},l.a.createElement("li",{className:"nav-item"},l.a.createElement(u.b,{to:"/login",className:"nav-link"},"Login")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(u.b,{to:"/register",className:"nav-link"},"Register"))),a=l.a.createElement("ul",{className:"navbar-nav"},l.a.createElement("li",{className:"nav-item"},l.a.createElement(u.b,{to:"/addTicket",className:"nav-link"},"AddTicket")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(u.b,{to:"/tickets",className:"nav-link"},"Tickets")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(u.b,{to:"/userProfile",className:"nav-link"},"Profile")),l.a.createElement("li",{className:"nav-item"},l.a.createElement("a",{href:"",onClick:this.logOut.bind(this),className:"nav-link"},"Logout")));return l.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark rounded"},l.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarsExample10","aria-controls":"navbarsExample10","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"collapse navbar-collapse justify-content-md-center",id:"navbarsExample10"},l.a.createElement("ul",{className:"navbar-nav"},l.a.createElement("li",{className:"nav-item"},l.a.createElement(u.b,{to:"/",className:"nav-link"},"Home"))),localStorage.usertoken?a:e))}}]),t}(n.Component),g=Object(h.e)(d),E=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(){return Object(c.a)(this,t),a.apply(this,arguments)}return Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"jumbotron mt-5"},l.a.createElement("div",{className:"col-sm-12 mx-auto"},l.a.createElement("h1",{className:"text-center"},"WELCOME TO SUPPORT MANAGEMENT SYSTEM"))))}}]),t}(n.Component),p=t(20),v=t(19),b=t(23),f=t.n(b),N=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(){var e;return Object(c.a)(this,t),(e=a.call(this)).state={email:"",password:"",error:{}},e.onChange=e.onChange.bind(Object(v.a)(e)),e.onSubmit=e.onSubmit.bind(Object(v.a)(e)),e}return Object(m.a)(t,[{key:"onChange",value:function(e){this.setState(Object(p.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){var a=this;e.preventDefault(),function(e){return f.a.post("users/login",{email:e.email,password:e.password}).then((function(e){return localStorage.setItem("usertoken",e.data),e.data})).catch((function(e){console.log(e)}))}({email:this.state.email,password:this.state.password}).then((function(e){e&&a.props.history.push("/")}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6 mt-5 mx-auto"},l.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},l.a.createElement("h1",{className:"h3 mb-3 font-weight-normal"},"Please sign in"),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"email"},"Email address"),l.a.createElement("input",{type:"email",className:"form-control",name:"email",placeholder:"Enter email",value:this.state.email,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("input",{type:"password",className:"form-control",name:"password",placeholder:"Password",value:this.state.password,onChange:this.onChange})),l.a.createElement("button",{type:"submit",className:"btn btn-lg btn-primary btn-block"},"Sign in")))))}}]),t}(n.Component),k=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(){var e;return Object(c.a)(this,t),(e=a.call(this)).state={first_name:"",last_name:"",email:"",password:"",role:"",errors:{}},e.onChange=e.onChange.bind(Object(v.a)(e)),e.onSubmit=e.onSubmit.bind(Object(v.a)(e)),e}return Object(m.a)(t,[{key:"onChange",value:function(e){this.setState(Object(p.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){var a=this;e.preventDefault(),function(e){return f.a.post("users/register",{first_name:e.first_name,last_name:e.last_name,email:e.email,password:e.password,role:e.role}).then((function(e){console.log("Registered")}))}({first_name:this.state.first_name,last_name:this.state.last_name,email:this.state.email,password:this.state.password,role:this.state.role}).then((function(e){a.props.history.push("/login")}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6 mt-5 mx-auto"},l.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},l.a.createElement("h1",{className:"h3 mb-3 font-weight-normal"},"Register"),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"name"},"First name"),l.a.createElement("input",{type:"text",className:"form-control",name:"first_name",placeholder:"Enter your first name",value:this.state.first_name,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"name"},"Last name"),l.a.createElement("input",{type:"text",className:"form-control",name:"last_name",placeholder:"Enter your lastname name",value:this.state.last_name,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"email"},"Email address"),l.a.createElement("input",{type:"email",className:"form-control",name:"email",placeholder:"Enter email",value:this.state.email,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("input",{type:"password",className:"form-control",name:"password",placeholder:"Password",value:this.state.password,onChange:this.onChange})),l.a.createElement("button",{type:"submit",className:"btn btn-lg btn-primary btn-block"},"Register!")))))}}]),t}(n.Component),C=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(){var e;return Object(c.a)(this,t),(e=a.call(this)).onChangeHandler=function(e){console.log(e.target.files[0])},e.state={name:"",content:"",messages:"",status:"",img:"",file:"",imagePreviewUrl:"",errors:{}},e.onChange=e.onChange.bind(Object(v.a)(e)),e.onSubmit=e.onSubmit.bind(Object(v.a)(e)),e}return Object(m.a)(t,[{key:"onChange",value:function(e){this.setState(Object(p.a)({},e.target.name,e.target.value))}},{key:"_handleSubmit",value:function(e){e.preventDefault(),console.log("handle uploading-",this.state.file),console.log("file burada")}},{key:"_handleImageChange",value:function(e){var a=this;e.preventDefault();var t=new FileReader,n=e.target.files[0];t.onloadend=function(){a.setState({file:n,imagePreviewUrl:t.result})},t.readAsDataURL(n)}},{key:"onSubmit",value:function(e){e.preventDefault(),console.log("ONSUBM\u0130TTE");var a=new FormData;a.append("img",this.state.file),a.append("name",this.state.name),a.append("content",this.state.content),a.append("messages",this.state.messages),f()({method:"post",url:"tickets/addTickets",data:a,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e,a=this,t=this.state.imagePreviewUrl;return t?l.a.createElement("img",{src:t}):l.a.createElement("div",{className:"previewText"},"Please select an Image for Preview"),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"jumbotron mt-5"},l.a.createElement("div",{className:"col-sm-8 mx-auto"},l.a.createElement("h1",{className:"text-center"},"ADD TICKET")),l.a.createElement("form",{encType:"multipart/form-data",noValidate:!0,onSubmit:this.onSubmit},l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"name",className:"mx-3"},l.a.createElement("p",null,"Ticket Name")),l.a.createElement("input",{type:"text",id:"name",className:"mx-2",placeholder:"Enter ticket name",value:this.state.name,onChange:this.onChange,name:"name",required:!0})),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"content",className:"mx-3"},l.a.createElement("p",null,"Content")),l.a.createElement("textarea",{id:"content",name:"content",className:"mx-4",rows:"2",styles:{},placeholder:"Enter content",value:this.state.content,onChange:this.onChange,required:!0})),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"content",className:"mx-3"},"Message"),l.a.createElement("textarea",(e={id:"messages",className:"mx-3",name:"messages",rows:"2"},Object(p.a)(e,"className","mx-3"),Object(p.a)(e,"placeholder","Enter Message"),Object(p.a)(e,"value",this.state.messages.text),Object(p.a)(e,"onChange",this.onChange),Object(p.a)(e,"required",!0),e))),l.a.createElement("br",null),l.a.createElement("div",{className:"previewComponent"},l.a.createElement("form",{onSubmit:function(e){return a._handleSubmit(e)}},l.a.createElement("input",{className:"fileInput",type:"file",onChange:function(e){return a._handleImageChange(e)}}),l.a.createElement("button",{className:"submitButton",type:"submit",onClick:function(e){return a._handleSubmit(e)}},"Upload Image"))),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement("button",{type:"submit"},"Submit")))))}}]),t}(n.Component),y=t(40),S=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(){var e;return Object(c.a)(this,t),(e=a.call(this)).state={first_name:"",last_name:"",email:"",role:"",errors:{}},e}return Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.usertoken,a=Object(y.a)(e);console.log(a),this.setState({first_name:a.first_name,last_name:a.last_name,email:a.email,role:a.role})}},{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"jumbotron mt-5"},l.a.createElement("div",{className:"col-sm-8 mx-auto"},l.a.createElement("h1",{className:"text-center"},"PROFILE")),l.a.createElement("table",{className:"table col-md-6 mx-auto"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Fist Name"),l.a.createElement("td",null,this.state.first_name)),l.a.createElement("tr",null,l.a.createElement("td",null,"Last Name"),l.a.createElement("td",null,this.state.last_name)),l.a.createElement("tr",null,l.a.createElement("td",null,"Email"),l.a.createElement("td",null,this.state.email)),l.a.createElement("tr",null,l.a.createElement("td",null,"role"),l.a.createElement("td",null,this.state.role))))))}}]),t}(n.Component),O=t(123),w=t(126),j=t(129),x=t(121),T=t(124),_=t(125),M=t(120),F=t(128),A=t(127),P=t(122),I=t(60),D=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(){var e;return Object(c.a)(this,t),(e=a.call(this)).getTicket=function(a){return f.a.get("tickets/getTicketAll",{}).then((function(a){e.setState({data:a.data});var t=[];return a.data.map((function(e){t.push(e.name)})),e.setState({namesData:t}),console.log(a.data),a.data})).catch((function(e){console.log(e)}))},e.editSearchTerm=function(a){if(a.target.value){e.setState({search:a.target.value});var t=e.state.data.filter((function(e){var t="".concat(e.name.toUpperCase()," ").concat(e.name.toUpperCase()," ").concat(e.name.toUpperCase()),n=a.target.value.toUpperCase();return t.indexOf(n)>-1}));e.setState({data:t})}else e.setState({search:""}),e.getTicket()},e.handleShow=function(a){return e.setState({show:!0,id:a})},e.MakeItem=function(e){return console.log(e),l.a.createElement("option",null,e)},e.state={data:[],show:!1,message:"",id:"",search:""},e.handleChange=e.handleChange.bind(Object(v.a)(e)),e}return Object(m.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(p.a)({},e.target.name,e.target.value))}},{key:"handleClose",value:function(e,a){this.setState({show:!1})}},{key:"handleAddMessage",value:function(e,a){this.addMessage(e,a),this.setState({show:!1}),this.getTicket()}},{key:"componentDidMount",value:function(){var e=localStorage.usertoken,a=Object(y.a)(e);this.getTicket(),this.setState({role:a.role})}},{key:"changeStatus",value:function(e,a){var t=this;return f.a.put("tickets/changeStatus",{id:e,status:a}).then((function(e){return t.getTicket(),e.data})).catch((function(e){console.log(e)}))}},{key:"statusFilter",value:function(e){var a=this;return f.a.post("tickets/filterStatus",{status:e}).then((function(e){return a.setState({data:e.data}),e.data})).catch((function(e){console.log(e)}))}},{key:"addMessage",value:function(e,a){var t=this;return f.a.post("tickets/addMessages",{id:e,messages:a}).then((function(e){return t.setState({data:e.data}),e.data})).catch((function(e){console.log(e)}))}},{key:"statusName",value:function(e){switch(e){case 0:return l.a.createElement("h5",null,l.a.createElement(M.a,{pill:!0,variant:"primary"},"Opening"));case 1:return l.a.createElement("h5",null,l.a.createElement(M.a,{pill:!0,variant:"danger"},"Waiting"));case 2:return l.a.createElement("h5",null,l.a.createElement(M.a,{pill:!0,variant:"success"},"Closed"));default:return l.a.createElement("h5",null,l.a.createElement(M.a,{pill:!0,variant:"primary"},"Opening"))}}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"container"},1===this.state.role?l.a.createElement("div",{className:"jumbotron mt-5"},l.a.createElement("div",{className:"col-sm-8 mx-auto"},l.a.createElement("h1",{className:"text-center"},"ADMIN PAGE",l.a.createElement("br",null),"TICKETS")),l.a.createElement(I.a,{variant:"primary",className:"mx-1",onClick:function(){return e.statusFilter(0)}},"Opening"),l.a.createElement(I.a,{variant:"danger",className:"mx-1",onClick:function(){return e.statusFilter(1)}},"Waiting"),l.a.createElement(I.a,{variant:"success",className:"mx-1",onClick:function(){return e.statusFilter(2)}},"Closed"),l.a.createElement(I.a,{variant:"dark",className:"mx-1",onClick:function(){return e.getTicket()}},"ALL"),l.a.createElement("input",{style:{float:"right"},value:this.state.search,placeholder:"Search TicketName",type:"text",onChange:this.editSearchTerm}),l.a.createElement(x.a,{component:P.a},l.a.createElement(O.a,{size:"small","aria-label":"a dense table"},l.a.createElement(T.a,null,l.a.createElement(_.a,null,l.a.createElement(j.a,null,"TicketName"),l.a.createElement(j.a,{align:"right"},"Content"),l.a.createElement(j.a,{align:"right"},"\u0130mage"),l.a.createElement(j.a,{align:"right"},"Message"),l.a.createElement(j.a,{align:"right"},"Status"),l.a.createElement(j.a,{align:"right"},"Change Status"),l.a.createElement(j.a,{align:"right"},"Add Message"))),l.a.createElement(w.a,null,this.state.data.length>0&&this.state.data.map((function(a,t){return l.a.createElement(_.a,{key:t},l.a.createElement(j.a,{component:"th",scope:"row"},a.name),l.a.createElement(j.a,{align:"right"},a.content),l.a.createElement(j.a,{align:"right"},l.a.createElement("a",{target:"_parent",href:"http://localhost:5000/public/".concat(a.img)},l.a.createElement("img",{width:"100px",src:"http://localhost:5000/public/".concat(a.img)}))),a.messages.map((function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,e.text),l.a.createElement("br",null))})),l.a.createElement(j.a,{align:"right"},e.statusName(a.status)),l.a.createElement(j.a,{align:"right"},l.a.createElement(F.a,null,l.a.createElement(F.a.Toggle,{size:"sm",variant:"success",id:"dropdown-basic"},"Change Status"),l.a.createElement(F.a.Menu,null,l.a.createElement(F.a.Item,{onClick:function(){return e.changeStatus(a._id,0)}},"Opening"),l.a.createElement(F.a.Item,{onClick:function(){return e.changeStatus(a._id,1)}},"Waiting"),l.a.createElement(F.a.Item,{onClick:function(){return e.changeStatus(a._id,2)}},"Closed")))),l.a.createElement(j.a,{align:"right"},"   ",l.a.createElement(l.a.Fragment,null,l.a.createElement(I.a,{name:"addButton",size:"sm",variant:"primary",onClick:function(){return e.handleShow(a._id)}},"Add Message"),l.a.createElement(A.a,{show:e.state.show,onHide:function(){return e.handleClose()}},l.a.createElement(A.a.Header,{closeButton:!0},l.a.createElement(A.a.Title,null,"Add Message ")),l.a.createElement(A.a.Body,null,l.a.createElement("form",null,l.a.createElement("label",null,"Message :",l.a.createElement("input",{type:"text",name:"message",value:e.state.message,onChange:e.handleChange})))),l.a.createElement(A.a.Footer,null,l.a.createElement(I.a,{variant:"secondary",onClick:function(){return e.handleClose()}},"Close"),l.a.createElement(I.a,{variant:"primary",onClick:function(){return e.handleAddMessage(e.state.id,e.state.message)}},"Add Message"))))))}))," ")))):l.a.createElement("div",{className:"jumbotron mt-5"},l.a.createElement("div",{className:"col-sm-8 mx-auto"},l.a.createElement("h1",{className:"text-center"},"USER PAGE",l.a.createElement("br",null),"TICKETS")),l.a.createElement(x.a,{component:P.a},l.a.createElement(O.a,{size:"small","aria-label":"a dense table"},l.a.createElement(T.a,null,l.a.createElement(_.a,null,l.a.createElement(j.a,null,"TicketName"),l.a.createElement(j.a,{align:"right"},"Content"),l.a.createElement(j.a,{align:"right"},"\u0130mage"),l.a.createElement(j.a,{align:"right"},"Message"),l.a.createElement(j.a,{align:"right"},"Status"),l.a.createElement(j.a,{align:"right"},"Add Message"))),l.a.createElement(w.a,null,this.state.data.length>0&&this.state.data.map((function(a,t){return l.a.createElement(_.a,{key:t},l.a.createElement(j.a,{component:"th",scope:"row"},a.name),l.a.createElement(j.a,{align:"right"},a.content),l.a.createElement(j.a,{align:"right"},l.a.createElement("a",{target:"_parent",href:"http://localhost:5000/public/".concat(a.img)},l.a.createElement("img",{width:"100px",src:"http://localhost:5000/public/".concat(a.img)}))),a.messages.map((function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,e.text),l.a.createElement("br",null))})),l.a.createElement(j.a,{align:"right"},e.statusName(a.status)),l.a.createElement(j.a,{align:"right"},"   ",l.a.createElement(l.a.Fragment,null,l.a.createElement(I.a,{name:"addButton",size:"sm",variant:"primary",onClick:function(){return e.handleShow(a._id)}},"Add Message"),l.a.createElement(A.a,{show:e.state.show,onHide:function(){return e.handleClose()}},l.a.createElement(A.a.Header,{closeButton:!0},l.a.createElement(A.a.Title,null,"Add Message")),l.a.createElement(A.a.Body,null,l.a.createElement("form",null,l.a.createElement("label",null,"Message :",l.a.createElement("input",{type:"text",name:"message",value:e.state.message,onChange:e.handleChange})))),l.a.createElement(A.a.Footer,null,l.a.createElement(I.a,{variant:"secondary",onClick:function(){return e.handleClose()}},"Close"),l.a.createElement(I.a,{variant:"primary",onClick:function(){return e.handleAddMessage(e.state.id,e.state.message)}},"Add Message"))))))}))," ")))))}}]),t}(n.Component),U=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(){return Object(c.a)(this,t),a.apply(this,arguments)}return Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement(u.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(g,null),l.a.createElement(h.a,{exact:!0,path:"/",component:E}),l.a.createElement(h.a,{exact:!0,path:"/register",component:k}),l.a.createElement(h.a,{exact:!0,path:"/login",component:N}),l.a.createElement(h.a,{exact:!0,path:"/addTicket",component:C}),l.a.createElement(h.a,{exact:!0,path:"/tickets",component:D}),l.a.createElement(h.a,{exact:!0,path:"/userProfile",component:S})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[68,1,2]]]);
//# sourceMappingURL=main.cc69710e.chunk.js.map